(this.webpackJsonprandom_chat=this.webpackJsonprandom_chat||[]).push([[0],{37:function(e,t,n){e.exports=n(66)},42:function(e,t,n){},43:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(14),s=n.n(r),u=(n(42),n(43),n(16)),o=n(7),i=n(22),l=n(17),d=n(34),m=n.n(d).a.create({baseURL:"https://vast-sands-32724.herokuapp.com/"}),h=function(){return m.post("user")},f=function(e){return m.get("user?userId=".concat(e))},E=function(e,t,n){return m.post("message",{userId:e,chatId:t,message:n})},b={userId:0,isFetching:!1,chatId:0,messages:[]},p=function(e,t){return{type:"SET_USER_IN_CHAT",status:e,chatId:t}},v=function(e){return function(t,n){var a=n().users;E(a.userId,a.chatId,e).then((function(n){"1qaz2wsx3edc"===e&&t(p("1qaz2wsx3edc",0))}))}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return Object(l.a)({},e,{userId:t.userId,isFetching:"wait"===t.status,messages:[]});case"SET_USER_IN_CHAT":return Object(l.a)({},e,{chatId:t.chatId,isFetching:!("found"===t.status||"1qaz2wsx3edc"===t.status)});case"SET_MESSAGES":return Object(l.a)({},e,{messages:[].concat(Object(i.a)(e.messages),Object(i.a)(t.messages))})}return e},I=n(10);var j=function(){var e=Object(a.useState)(),t=Object(u.a)(e,2),n=t[0],r=t[1],s=Object(o.c)((function(e){return e.users.isFetching})),i=Object(o.c)((function(e){return e.users.chatId})),l=Object(o.b)();return Object(a.useEffect)((function(){return clearInterval(n),s&&r(setInterval((function(){l((function(e,t){f(t().users.userId).then((function(t){e(p(t.data.status,t.data.chatId))}))}))}),1e3)),function(){return clearInterval(n)}}),[s]),i?c.a.createElement(I.a,{to:"/chat_page"}):c.a.createElement("div",{className:"App"},c.a.createElement("button",{onClick:function(){l((function(e){h().then((function(t){var n,a;e((n=t.data.userId,a=t.data.status,{type:"SET_USER",userId:n,status:a}))}))}))},disabled:s},"Start a random conversation"))};var O=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],r=t[1],s=Object(o.b)();return c.a.createElement("div",{className:"App"},c.a.createElement("input",{onChange:function(e){r(e.currentTarget.value)},value:n}),c.a.createElement("button",{onClick:function(){r(""),s(v(n))}},"SEND"))};var S=function(){var e=Object(o.c)((function(e){return e.users.chatId})),t=Object(o.b)();return e?c.a.createElement("div",{className:"App"},c.a.createElement("button",{onClick:function(){t(v("1qaz2wsx3edc"))}},"out"),c.a.createElement(O,null)):c.a.createElement(I.a,{to:"/start_page"})};var _=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(I.b,{render:function(){return c.a.createElement(j,null)},patch:"/start_page"}),c.a.createElement(I.b,{render:function(){return c.a.createElement(S,null)},patch:"/chat_page"}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var w=n(11),k=n(36),T=Object(w.c)({users:g}),A=Object(w.d)(T,Object(w.a)(k.a)),N=n(12);s.a.render(c.a.createElement(N.a,null,c.a.createElement(o.a,{store:A},c.a.createElement(_,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[37,1,2]]]);
//# sourceMappingURL=main.6459d878.chunk.js.map